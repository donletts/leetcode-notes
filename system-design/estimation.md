# Estimation

## Why Estimation

- **indicates scalability**: highlights how systems can grow and adapt
- **validates proposed solutions**: helps ensure the proposed architecture meets the requirements and can handle the expected load
- **identify bottlenecks**: quick calculations help you identify potential performance bottlenecks and make adjustments
- **demonstrate thought process**: ability to make informed decisions and trade-offs based on assumptions and contstraints
- **communicate effectively**: communicate design choices and their implications
- **quick decision making**: ability to make swift estimations

## Types of Estimations

- **Load**: predict number of requests per second, data volumne, or user traffic for the system
- **Storage**: amount of storage required to handle the data generated by the system
- **Bandwidth**: network bandwith needed to support th expected traffic and data transfer
- **Latency**: predict response time and latency of the system based on architecture and components
- **Resource**: estimate number of servers, cpus or memory required to handle the load and maintain desired performance levels

## Process

- **understand the scope**: clarify the scale of the problem - how many users, how much data
- **simple math**: utilize basic arithmetic to estimate scale of data and resources
- **round numbers**: use round numbers to make calculations easier
- **logical and reasonable**: ensure your estimations make sense given the context of the problem

## Practical Examples

1. Load estimation:

   supposed you have 100 million daily active users and an average of 10 posts per day

   100,000,000 \* 10 == 1,000,000,000 posts per day / 86400 == 11,574 posts per second

1. Storage estimation:

   photo sharing app with 500 million users and an average of 2 photos per user per day

   500 \* 2 == 1 billion photos per day. 1 MB per photo \* 1 billion photos == 1 billion MB per day == 1000 TB per day

1. Bandwidth estimation:

   video streaming service with 10 million users streaming 1080p videos at 4 Mbps

   10 million \* 4 == 40 million Mbps == 40,000,000 == 40 Gbps

1. Latency estimation

   designing an API that fetches data from multiple sources and average latency for each source is 50 ms, 100 ms, and 200 ms each. if data fetching process is sequencial, total latency is:

   50 + 100 + 200 = 350 ms

   if parallel

   max(50, 100, 200) = 200 ms

1. Resource estimation

   imagine you're designing a web app that receives 10,000 requests per second with each request requiring 10 ms of CPU time. to estimate total cores neeed you can calculate the total cpu time per second

   10,000 requests / sec \* 10 ms cpu = 100,000 ms cpu / sec

   assuming each cpu can handle 1,000 ms of processing per second, number of cores:

   100,000 ms cpu / sec / 1,000 ms /sec == 100 cores

## System design examples

1. messaging service

   - number of users: 1 million users / day
   - messages per day: 10 messages / day
   - message size (has photos): 1 MB / post
   - storage: 1 mill \* 10 \* 1 MB == 10,000,000 MB == 10 TB / day
   - bandwidth: 10 msg / user \* 1 mill == 10,000,000 msg / day / 86400 == 115 msg / sec \* 1 MB == 115 MBps ~ 1,000 Mbps

1. video streaming service

   - users / day: 1 million
   - concurent users: 250k
   - video size/bitrate: 500 MB per video, 1080p at 4 Mbps.
   - storage: 500 MB per video, 1m videos == 500,000,000 MB == 500 TB, triple redundancy == 1.5 PB
   - bandwidth: 1m users \* 4 Mbps == 4 Gbps
